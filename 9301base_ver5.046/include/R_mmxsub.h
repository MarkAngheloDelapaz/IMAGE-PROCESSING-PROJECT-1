/* *****************************************************************

	ｍｍｘｓｕｂ.h

	ｍｍｘ用サブルーチン

	06.02.01		ＭＭＸ／ＳＳＥ用のバイトマスクを登録 by tanaka

******************************************************************* */

#ifndef	R_MMXSUB_H_
#define	R_MMXSUB_H_

#ifdef	R_MMXSUB

unsigned long GrayMasks64[] = {	0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFF00, 0xFFFFFFFF,	
								0xFFFF0000, 0xFFFFFFFF, 0xFF000000, 0xFFFFFFFF,
								0x00000000, 0xFFFFFFFF, 0x00000000, 0xFFFFFF00,
								0x00000000, 0xFFFF0000, 0x00000000, 0xFF000000  };
unsigned long GrayMaske64[] = {	0x000000FF, 0x00000000, 0x0000FFFF, 0x00000000,	
								0x00FFFFFF, 0x00000000, 0xFFFFFFFF, 0x00000000,
								0xFFFFFFFF, 0x000000FF, 0xFFFFFFFF, 0x0000FFFF,
								0xFFFFFFFF, 0x00FFFFFF, 0xFFFFFFFF, 0xFFFFFFFF  };

unsigned long GrayMasks128[] = {	0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF,
									0xFFFFFF00, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF,
									0xFFFF0000, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF,
									0xFF000000, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF,
									0x00000000, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF,
									0x00000000, 0xFFFFFF00, 0xFFFFFFFF, 0xFFFFFFFF,
									0x00000000, 0xFFFF0000, 0xFFFFFFFF, 0xFFFFFFFF,
									0x00000000, 0xFF000000, 0xFFFFFFFF, 0xFFFFFFFF,

									0x00000000, 0x00000000, 0xFFFFFFFF, 0xFFFFFFFF,
									0x00000000, 0x00000000, 0xFFFFFF00, 0xFFFFFFFF,
									0x00000000, 0x00000000, 0xFFFF0000, 0xFFFFFFFF,
									0x00000000, 0x00000000, 0xFF000000, 0xFFFFFFFF,
									0x00000000, 0x00000000, 0x00000000, 0xFFFFFFFF,
									0x00000000, 0x00000000, 0x00000000, 0xFFFFFF00,
									0x00000000, 0x00000000, 0x00000000, 0xFFFF0000,
									0x00000000, 0x00000000, 0x00000000, 0xFF000000 };

unsigned long GrayMaske128[] = {	0x000000FF, 0x00000000, 0x00000000, 0x00000000,
									0x0000FFFF, 0x00000000, 0x00000000, 0x00000000,
									0x00FFFFFF, 0x00000000, 0x00000000, 0x00000000,
									0xFFFFFFFF, 0x00000000, 0x00000000, 0x00000000,
									0xFFFFFFFF, 0x000000FF, 0x00000000, 0x00000000,
									0xFFFFFFFF, 0x0000FFFF, 0x00000000, 0x00000000,
									0xFFFFFFFF, 0x00FFFFFF, 0x00000000, 0x00000000,
									0xFFFFFFFF, 0xFFFFFFFF, 0x00000000, 0x00000000,

									0xFFFFFFFF, 0xFFFFFFFF, 0x000000FF, 0x00000000,
									0xFFFFFFFF, 0xFFFFFFFF, 0x0000FFFF, 0x00000000,
									0xFFFFFFFF, 0xFFFFFFFF, 0x00FFFFFF, 0x00000000,
									0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x00000000,
									0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x000000FF,
									0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x0000FFFF,
									0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x00FFFFFF,
									0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF };

/*	

//#include <mmintrin.h>
typedef union {
    #ifdef __WATCOM_INT128__
       unsigned __int128	_128[1];
    #endif
    #ifdef __WATCOM_INT64__
       unsigned __int64	_i64[2];
    #endif
	__m64			_64[ 2];
    unsigned long	_32[ 4];
    unsigned short	_16[ 8];
    unsigned char	 _8[16];
} __m128;


__m64	GrayMasks64[] = {	0xFFFFFFFFFFFFFFFF, 0xFFFFFFFFFFFFFF00,
							0xFFFFFFFFFFFF0000, 0xFFFFFFFFFF000000,
							0xFFFFFFFF00000000, 0xFFFFFF0000000000,
							0xFFFF000000000000, 0xFF00000000000000  };

__m64	GrayMaske64[] = {	0x00000000000000FF, 0x000000000000FFFF,
							0x0000000000FFFFFF, 0x00000000FFFFFFFF,
							0x000000FFFFFFFFFF, 0x0000FFFFFFFFFFFF,
							0x00FFFFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF  };


__m128	GrayMasks128[] = {	0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF,
							0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00,
							0xFFFFFFFFFFFFFFFFFFFFFFFFFFFF0000,
							0xFFFFFFFFFFFFFFFFFFFFFFFFFF000000,
							0xFFFFFFFFFFFFFFFFFFFFFFFF00000000,
							0xFFFFFFFFFFFFFFFFFFFFFF0000000000,
							0xFFFFFFFFFFFFFFFFFFFF000000000000,
							0xFFFFFFFFFFFFFFFFFF00000000000000,

							0xFFFFFFFFFFFFFFFF0000000000000000,
							0xFFFFFFFFFFFFFF000000000000000000,
							0xFFFFFFFFFFFF00000000000000000000,
							0xFFFFFFFFFF0000000000000000000000,
							0xFFFFFFFF000000000000000000000000,
							0xFFFFFF00000000000000000000000000,
							0xFFFF0000000000000000000000000000,
							0xFF000000000000000000000000000000 };


__m128	GrayMaske128[] = {	0x000000000000000000000000000000FF,
							0x0000000000000000000000000000FFFF,
							0x00000000000000000000000000FFFFFF,
							0x000000000000000000000000FFFFFFFF,
							0x0000000000000000000000FFFFFFFFFF,
							0x00000000000000000000FFFFFFFFFFFF,
							0x000000000000000000FFFFFFFFFFFFFF,
							0x0000000000000000FFFFFFFFFFFFFFFF,

							0x00000000000000FFFFFFFFFFFFFFFFFF,
							0x000000000000FFFFFFFFFFFFFFFFFFFF,
							0x0000000000FFFFFFFFFFFFFFFFFFFFFF,
							0x00000000FFFFFFFFFFFFFFFFFFFFFFFF,
							0x000000FFFFFFFFFFFFFFFFFFFFFFFFFF,
							0x0000FFFFFFFFFFFFFFFFFFFFFFFFFFFF,
							0x00FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF,
							0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF };
*/

#else
	extern unsigned long	GrayMasks64[] ;
	extern unsigned long	GrayMaske64[] ;
	extern unsigned long	GrayMasks128[] ;
	extern unsigned long	GrayMaske128[] ;
#endif

// 内部関数プロトタイプ宣言追加 2009/07/21
void	r_makebinmask(int x1, int x2);
void	r_makegraymask(int x1, int x2);

#include <mmintrin.h>	// __m64
extern __m64	msb, meb, nsb, neb;		// マスク

#endif	// R_MMXSUB_H_
